# Internationalization (i18n) with Lingui

Servify supports 3 languages: English (en), Uzbek (uz), and Russian (ru).

## When to Use i18n

**ALWAYS wrap user-facing text with Lingui:**
- Button labels
- Form labels and placeholders
- Error messages
- Success notifications
- Page titles and headings
- UI descriptions and help text
- Validation messages
- Empty states
- Confirmation dialogs

**DO NOT translate:**
- Code identifiers (variable names, function names)
- API endpoints
- Database values (these should be translated at query time if needed)
- Log messages (internal, for developers)
- Comments in code

## React/React Native Usage

### Static text (JSX)

```tsx
import { Trans } from "@lingui/react/macro";

// Good
<Text><Trans>Welcome back</Trans></Text>
<Button><Trans>Sign In</Trans></Button>

// Bad - hardcoded text
<Text>Welcome back</Text>
```

### Dynamic text (variables, props)

```tsx
import { useLingui } from "@lingui/react/macro";

function MyComponent() {
  const { t } = useLingui();
  
  // Good
  const placeholder = t`Enter your email`;
  const errorMsg = t`Password is required`;
  
  return <TextInput placeholder={placeholder} />;
}
```

### Text with variables

```tsx
import { Trans } from "@lingui/react/macro";

// Good - with interpolation
<Trans>Welcome, {userName}</Trans>
<Trans>You have {count} unread messages</Trans>

// Good - pluralization
import { Plural } from "@lingui/react/macro";
<Plural value={count} one="# message" other="# messages" />
```

## Workflow

1. **Write code with Lingui macros:**
```tsx
<Trans>Book Service</Trans>
```

2. **Extract messages:**
```bash
bun lingui:extract
```

3. **Translate in `.po` files:**
```po
msgid "Book Service"
msgstr "Xizmatni band qilish"  # Uzbek
```

4. **Compile (production only):**
```bash
bun lingui:compile
```

Development uses on-the-fly compilation via Metro/Vite transformers.

## Best Practices

### 1. Use message IDs for complex text

```tsx
// For long text, use explicit IDs
<Trans id="booking.confirmation.message">
  Your booking has been confirmed. The provider will arrive at your location.
</Trans>
```

### 2. Keep messages short and contextual

```tsx
// Good - specific context
<Trans>Provider not found</Trans>
<Trans>Service unavailable</Trans>

// Bad - too generic
<Trans>Error</Trans>
<Trans>Not found</Trans>
```

### 3. Extract button actions consistently

```tsx
// Use consistent terminology
<Trans>Save</Trans>      // not "Submit" sometimes, "Save" other times
<Trans>Cancel</Trans>    // not "Close", "Dismiss", etc.
<Trans>Delete</Trans>    // not "Remove"
```

### 4. Handle plurals properly

```tsx
import { Plural } from "@lingui/react/macro";

<Plural 
  value={providers.length}
  one="# provider available"
  other="# providers available"
/>
```

### 5. Context for ambiguous words

```tsx
// "Book" can mean "reserve" or "a physical book"
<Trans context="action">Book</Trans>  // Reserve
<Trans context="noun">Book</Trans>    // Physical book
```

## Anti-Patterns

**DO NOT** hardcode user-facing text - always use Lingui `<Trans>` or `t` macro.

